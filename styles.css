:root{
  --bg:#fff;
  --ink:#111;
  --muted:#555;
  --light:#e6e6e6;

  /* JS sets this on desktop to scale 800x480 to fit screen */
  --stage-scale: 1;
}

*{box-sizing:border-box}

html,body{
  margin:0;
  height:100%;
  background:var(--bg);
  color:var(--ink);
  font-family:system-ui,Segoe UI,Arial,sans-serif;
}

body{
  display:grid;
  place-items:center;
  overflow:hidden;
}

/* =========================================================
   Base stage (pixel-perfect) + desktop scale
   ========================================================= */
.stage{
  width:800px;
  height:480px;
  padding:18px;
  display:grid;
  grid-template-rows:auto 1fr auto;
  gap:14px;
  background:var(--bg);

  transform: scale(var(--stage-scale));
  transform-origin:center center;
}

.top{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  border-bottom:2px solid var(--ink);
  padding-bottom:8px;
}

.headline{
  font-size:28px;
  font-weight:800;
}

.subline{
  margin-top:4px;
  font-size:14px;
  color:var(--muted);
}

.clock{
  font-size:30px;
  font-weight:800;
  border:2px solid var(--ink);
  padding:6px 12px;
  border-radius:999px;
  font-variant-numeric:tabular-nums;
}

.topRight{
  display:flex;
  align-items:center;
  gap:10px;
}

.themeToggle{
  background:none;
  border:2px solid var(--ink);
  color:var(--ink);
  width:34px;
  height:34px;
  border-radius:999px;
  cursor:pointer;
  display:grid;
  place-items:center;
  padding:0;
}

.themeToggle svg{
  width:18px;
  height:18px;
  display:block;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
  stroke-linecap:round;
  stroke-linejoin:round;
}

/* default = day -> show moon */
.themeToggle .iconSun{ display:none; }
/* night -> show sun */
html.invert .themeToggle .iconMoon{ display:none; }
html.invert .themeToggle .iconSun{ display:block; }

.themeToggle:active{ transform:scale(.96); }

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:14px;
}

.card{
  border:2px solid var(--ink);
  border-radius:14px;
  padding:12px;
  display:grid;
  gap:10px;
}

.span2{grid-column:span 2}

.cardTitle{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:13px;
  font-weight:800;
  letter-spacing:.4px;
  text-transform:uppercase;
}

.icon{
  width:22px;
  height:22px;
  display:grid;
  place-items:center;
}

.icon svg{
  width:100%;
  height:100%;
  display:block;
}

/* Weather card styles */
.wxMain{
  display:flex;
  justify-content:space-between;
  align-items:baseline;
}

.wxTemp{
  font-size:52px;
  font-weight:900;
  font-variant-numeric:tabular-nums;
}

.wxDesc{
  font-size:16px;
  font-weight:700;
  text-align:right;
}

.wxMeta{
  display:flex;
  gap:18px;
  font-size:16px;
}

.k{color:var(--muted)}
.v{font-weight:800}

.row{
  display:flex;
  justify-content:space-between;
  border-top:1px solid var(--light);
  padding:6px 0;
}

.row:first-of-type{border-top:none}

.label{color:var(--muted);font-weight:800}
.value{font-weight:900;font-size:22px;font-variant-numeric:tabular-nums}

/* Week */
.week{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:8px;
}

.day{
  border:1px solid var(--light);
  border-radius:10px;
  padding:6px 4px;
  display:grid;
  gap:4px;
  justify-items:center;
}

.dayName{
  font-size:12px;
  font-weight:800;
  color:var(--muted);
}

.dayIcon{
  width:18px;
  height:18px;
  display:grid;
  place-items:center;
}

.dayIcon svg{
  width:100%;
  height:100%;
  display:block;
}

.dayTemps{
  font-size:13px;
  font-weight:800;
  display:flex;
  gap:6px;
  font-variant-numeric:tabular-nums;
}

.lo{color:var(--muted)}

.footer{
  border-top:2px solid var(--ink);
  padding-top:6px;
  display:flex;
  justify-content:flex-end;
}

.tiny{font-size:11px}
.muted{color:var(--muted)}

.card.stale .cardTitle,
.card.stale .value,
.card.stale .tiny{
  color:var(--muted);
  font-style:italic;
}

/* whole-page invert (applied to <html>) */
html.invert{
  --bg:#000;
  --ink:#fff;
  --muted:#bbb;
  --light:#444;
}

/* =========================================================
   Detail pages shared (weather + markets)
   ========================================================= */
.detail{
  display:grid;
  gap:14px;

  /* key: allow middle pane to scroll inside 480px stage */
  overflow:auto;
  min-height:0;
  padding-right:6px;
}

.detailGrid{
  display:grid;
  gap:14px;
}

.detailBar{
  display:flex;
  align-items:center;
  gap:12px;
  justify-content:space-between;
}

.btn{
  background:none;
  border:2px solid var(--ink);
  color:var(--ink);
  padding:6px 10px;
  border-radius:999px;
  font-weight:800;
  cursor:pointer;
}

/* =========================================================
   Weather detail styles (restores the broken layout)
   ========================================================= */
.cityForm{
  display:flex;
  gap:8px;
  align-items:center;
}

.cityInput{
  width:min(280px, 45vw);
  border:2px solid var(--ink);
  border-radius:999px;
  padding:6px 10px;
  background:var(--bg);
  color:var(--ink);
  outline:none;
}

.detailCurrent{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:16px;
}

.bigTemp{
  font-size:64px;
  font-weight:900;
  font-variant-numeric:tabular-nums;
}

.detailMeta{
  display:grid;
  gap:6px;
  min-width:240px;
}

/* Hourly table */
.hourly{
  display:grid;
  gap:8px;
}

.hourHeader,
.hourRow{
  display:grid;
  grid-template-columns: 70px 32px 70px 80px 1fr;
  align-items:center;
  gap:10px;
}

.hourHeader{
  font-size:12px;
  font-weight:900;
  text-transform:uppercase;
  letter-spacing:.4px;
  color:var(--muted);
}

.hourTime{ font-weight:900; font-variant-numeric:tabular-nums; }
.hourTemp{ font-weight:900; }
.hourPop{ color:var(--muted); font-weight:800; }

/* =========================================================
   Markets detail styles
   ========================================================= */
.mktLegend{
  display:flex;
  justify-content:space-between;
  gap:12px;
  align-items:flex-end;
}

.mktGrid4{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:14px;
}

.mktBlock{
  border:1px solid var(--light);
  border-radius:12px;
  padding:10px;
  display:grid;
  gap:8px;
}

.mktHead{
  display:flex;
  justify-content:space-between;
  align-items:baseline;
}

.mktSym{
  font-weight:900;
  font-size:16px;
  letter-spacing:.4px;
}

.mktNow{
  font-weight:900;
  font-size:18px;
  font-variant-numeric:tabular-nums;
}

.mktSub{
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  gap:10px;
}

.mktDelta{
  display:flex;
  gap:10px;
  align-items:baseline;
  font-size:13px;
}

.mktSpark svg{
  width:100%;
  height:28px;
  display:block;
}

.sparkBase{
  stroke:var(--light);
  stroke-width:1;
}

.sparkLine{
  fill:none;
  stroke:var(--ink);
  stroke-width:2;
  stroke-linecap:round;
  stroke-linejoin:round;
}

.mktTable{
  display:grid;
  gap:4px;
  font-size:12px;
}

.mktRow{
  display:flex;
  justify-content:space-between;
  border-top:1px solid var(--light);
  padding-top:4px;
}

.mktRowHead{
  border-top:none;
  font-weight:900;
  text-transform:uppercase;
  letter-spacing:.4px;
  color:var(--muted);
  padding-top:0;
}

.mktDate{
  color:var(--muted);
  font-weight:800;
}

.mktClose{
  font-weight:900;
  font-variant-numeric:tabular-nums;
}

/* =========================================================
   Mobile/tablet: disable scaling & reflow
   ========================================================= */
@media (max-width: 900px){
  body{
    place-items:stretch;
    overflow:auto;
  }

  .stage{
    width:100%;
    height:auto;
    min-height:100svh;
    transform:none;
    padding:16px;
    grid-template-rows:auto auto auto;
  }

  .top{
    flex-direction:column;
    gap:10px;
  }

  .topRight{
    width:100%;
    justify-content:space-between;
  }

  .grid{
    grid-template-columns:1fr;
  }

  .span2{
    grid-column:auto;
  }

  .wxMain{
    flex-direction:column;
    align-items:flex-start;
    gap:6px;
  }

  .wxDesc{
    text-align:left;
  }

  .week{
    grid-template-columns:repeat(3,1fr);
  }

  .detailBar{
    flex-direction:column;
    align-items:flex-start;
  }

  .detailCurrent{
    flex-direction:column;
    align-items:flex-start;
  }

  .hourHeader,
  .hourRow{
    grid-template-columns: 60px 28px 60px 70px 1fr;
  }

  .mktGrid4{
    grid-template-columns:1fr;
  }
}

@media (min-width: 601px) and (max-width: 900px){
  .week{ grid-template-columns:repeat(4,1fr); }
}

.wcValue{
  font-size:18px;
}

.wcList{
  display:grid;
  gap:6px;
}

.wcGrid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:14px;
}

.wcBig{
  font-size:22px;
  font-variant-numeric: tabular-nums;
}

@media (max-width: 900px){
  .wcGrid{ grid-template-columns: 1fr; }
}

/* ===========================
   World Clock
   =========================== */

.wcList{
  display:grid;
  grid-template-columns:repeat(5, 1fr);
  gap:8px;
}

.wcTile{
  border:1px solid var(--light);
  border-radius:10px;
  padding:6px 4px;
  display:grid;
  gap:6px;
  justify-items:center;
}

.wcCity{
  font-size:12px;
  font-weight:800;
  color:var(--muted);
  text-align:center;
}

.wcTime{
  font-size:13px;
  font-weight:900;
  font-variant-numeric:tabular-nums;
  text-align:center;
}

.wcGrid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:14px;
}

.wcBig{
  font-variant-numeric:tabular-nums;
}

/* Mobile: keep it readable */
@media (max-width: 900px){
  .wcList{ grid-template-columns:repeat(3, 1fr); }
  .wcGrid{ grid-template-columns:1fr; }
}
@media (min-width: 601px) and (max-width: 900px){
  .wcList{ grid-template-columns:repeat(4, 1fr); }
}
